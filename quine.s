[bits 32]
%macro push 1-* 
%rep %0
push %1 
%rotate 1 
%endrep 
%endmacro
section .data
code: db "[bits 32]%c%%macro push 1-*%c%%rep %%0%cpush %%1%c%%rotate 1%c%%endrep%c%%endmacro%csection .data%ccode: db %c%s%c%csection .text%cextern printf%cglobal main%cmain:%cpush 0xa,0xa,0xa,0xa,0xa,0xa,0xa,0xa,0xa,0xa,34,code,34,0xa,0xa,0xa,0xa,0xa,0xa,0xa,0xa,code%ccall printf%cmov eax, 1%cxor ebx, ebx%cint 0x80"
section .text
extern printf
global main 
main:
push 0xa,0xa,0xa,0xa,0xa,0xa,0xa,0xa,0xa,0xa,34,code,34,0xa,0xa,0xa,0xa,0xa,0xa,0xa,0xa,code
call printf
mov eax, 1
xor ebx, ebx
int 0x80 
